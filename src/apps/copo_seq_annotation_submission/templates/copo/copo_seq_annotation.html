{% extends 'copo/base_2col.html' %}

{% load static %}
{% load web_tags %}
{% load html_tags %}

{% block title %}Sequence Annotations{% endblock %}
{% block stylesheet_block %}

    <style>
        .highlight_accession {
            background-color: #d9e8d9 !important;
        }

        .highlight_no_accession {
            background-color: #FFD700 !important;
        }
        .highlight_error_file_processing_status {
            background-color: #f88080 !important;
        }        
    </style>

{% endblock %}


{% block title_block %}Sequence Annotations{% endblock %}

{% block tagline_block %}

{% endblock %}


{% block browse_header_block %}
    {% csrf_token %}
    <div hidden id="hidden_attrs">
        <!-- hidden attributes  -->
        <input type="hidden" id="profile_title" value="{{ profile.title }}"/>
        <input type="hidden" id="profile_type" value="{{ profile.type }}" />
        <input type="hidden" id="profile_id" value="{{ profile_id }}" />
        <input type="hidden" id="nav_component_name" value="seqannotation"/>
    </div>

{% endblock %}

{% block page_tile %}
    {% include "component_navbar.html" %}
{% endblock page_tile %}


{% block content %}
    <!-- publication entry options -->
    <div id="pub_options" class="row collapse" style="margin-bottom: 20px;">
        <div class="col-sm-3 col-md-3 col-lg-3">
            <button type="button" style="background-image:none;"
                    class="btn btn-sm btn-primary new-form-call"
                    data-component="publication">Publication Form (Manual Entry)
            </button>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3">
            <div class="input-group">
                <input type="text" class="form-control input-sm resolver-data" data-resolver="doi"
                       placeholder="Enter a DOI">
                <span class="input-group-btn">
                            <button class="btn btn-sm btn-primary resolver-submit" type="button"
                                    style="background-image:none;">Resolve
                            </button>
                </span>
            </div>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3">
            <div class="input-group">
                <input type="text" class="form-control input-sm resolver-data" data-resolver="pmid"
                       placeholder="Enter a PubMed ID">
                <span class="input-group-btn">
                            <button class="btn btn-sm btn-primary resolver-submit"
                                    type="button"
                                    style="background-image:none;">Resolve
                            </button>
                </span>
            </div>
        </div>
        <div class="col-sm-3 col-md-3 col-lg-3"></div>
    </div>


    <!-- getting started section -->
    <div class="row">
        <div class="col-sm-5 col-md-5 col-lg-5 col-xs-offset-0 page-welcome-message"
             style="display: none;" data-tour-id="getting_started">
            <div class="copo-webui-popover">
                <div class="webui-popover-inner">
                    <h3 class="copo-webui-popover-title">Getting started</h3>
                    <div class="copo-webui-popover-content">
                        <div class="webpop-content-div">
                            <p>
                                This page relates to the <strong>Sequence Annotations</strong> component 
                                (<i id="componentIcon" class="ui icon" aria-hidden="true"></i>) of a profile.
                                Sequence annotations involve marking specific features
                                in a <span class="hover-text" title="Deoxyribonucleic acid">DNA</span>, 
                                <span class="hover-text" title="Ribonucleic acid">RNA</span> or protein sequence with
                                descriptive information about structure or function. It is usually performed after
                                a genome is sequenced and assembled.
                            </p>
                            <br>
                            <p>
                                <strong>Step 1</strong>: <strong class="text-underline">Upload prerequisite data</strong>: Before adding annotations,  
                                upload the following data using the icons in the navigation pane (top right):
                                <ul>
                                    <li><i class="ui icon blue file"></i> — for annotation <strong>data files</strong></li>
                                    <li><i class="ui icon olive filter"></i> — for <strong>samples</strong></li>
                                    <li><i class="ui icon orange dna"></i> — for <strong>reads</strong></li></ul>
                                </ul>
                            </p>
                            <br>
                            <p>
                                <strong>Step 2</strong>: <strong class="text-underline">Add annotations</strong>:
                                Click <button class="circular tiny ui icon primary button no-click">
                                    <i class="icon table add"></i>
                                </button> above to open a form to add annotations.
                            </p>
                            <br>
                            <p>
                                <strong>Quick tour</strong>: To explore various controls on this page, click 
                                <button class="circular tiny ui icon orange button no-click">
                                    <i class="icon lightbulb"></i>
                                </button> above.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- publication_table -->
    <div id="component_table_loader" class="col-sm-5 col-md-5 col-lg-5 col-xs-offset-5"></div>
    <div class="table-parent-div">
        <table id="seqannotation_table" class="ui celled table hover copo-noborders-table"
               cellspacing="0" width="100%">
        </table>
    </div>

    <div id="data" style="display: none;"></div>


{% endblock %}

{% block help_section %}
{% endblock %}

{% block sidebar_custom_section %}
<!-- Sequence annotation legend -->
<div class="component-legend" data-tour-id="component_legend" 
    data-legend="data_status"></div>
{% endblock sidebar_custom_section %}

{% block component_info %}
    <div style="display:none; margin-top: 30px; " id="annotation_info" class="alert alert-info"
         role="alert"></div>
{% endblock %}

{% block js_block %}
    <script src="{% static 'copo/js/generic_handlers.js' %}"></script>
    <script src="{% static 'copo/js/generic_handlers_ext2.js' %}"></script>
    <script src="{% static 'copo/js/copo_form_handlers.js' %}"></script>
    <script src="{% static 'copo/js/copo_seq_annotation.js' %}"></script>

{% endblock %}
