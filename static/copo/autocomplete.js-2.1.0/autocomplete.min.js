/*
 * @license MIT 
 * 
 * Autocomplete.js v2.1.0
 * Developed by Baptiste Donaux
 * https://autocomplete-js.com
 *
 * (c) 2016, Baptiste Donaux
 */

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.AutoComplete = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";var ConditionOperator;!function(t){t[t.AND=0]="AND",t[t.OR=1]="OR"}(ConditionOperator||(ConditionOperator={}));var AutoComplete=function(){function t(e,i){if(void 0===e&&(e={}),void 0===i&&(i="[data-autocomplete]"),Array.isArray(i))i.forEach(function(i){new t(e,i)});else if("string"==typeof i){var o=document.querySelectorAll(i);Array.prototype.forEach.call(o,function(i){new t(e,i)})}else t.prototype.create(t.merge(t.defaults,e,{DOMResults:document.createElement("div")}),i)}return t.prototype.create=function(e,i){if(e.Input=i,e.Input.nodeName.match(/^INPUT$/i)&&(e.Input.hasAttribute("type")===!1||e.Input.getAttribute("type").match(/^TEXT|SEARCH$/i))){e.Input.setAttribute("autocomplete","off"),e._Position(e),e.Input.parentNode.appendChild(e.DOMResults),e.$Listeners={blur:e._Blur.bind(e),destroy:t.prototype.destroy.bind(null,e),focus:e._Focus.bind(e),keyup:t.prototype.event.bind(null,e),keydown:function(t){38!=t.keyCode&&40!=t.keyCode||t.preventDefault()},position:e._Position.bind(e)};for(var o in e.$Listeners)e.Input.addEventListener(o,e.$Listeners[o])}},t.prototype.event=function(e,i){var o=function(e){(s===!0&&n.Operator==ConditionOperator.AND||s===!1&&ConditionOperator.OR)&&(e=t.merge({Not:!1},e),e.hasOwnProperty("Is")?s=e.Is==i.keyCode?!e.Not:e.Not:e.hasOwnProperty("From")&&e.hasOwnProperty("To")&&(s=i.keyCode>=e.From&&i.keyCode<=e.To?!e.Not:e.Not))};for(var r in e.KeyboardMappings){var n=t.merge({Operator:ConditionOperator.AND},e.KeyboardMappings[r]),s=ConditionOperator.AND==n.Operator;n.Conditions.forEach(o),s===!0&&n.Callback.bind(e,i)()}},t.prototype.ajax=function(e,i,o){if(void 0===o&&(o=!0),e.$AjaxTimer&&window.clearTimeout(e.$AjaxTimer),o===!0)e.$AjaxTimer=window.setTimeout(t.prototype.ajax.bind(null,e,i,!1),e.Delay);else{e.Request&&e.Request.abort();var r=Object.getOwnPropertyNames(e.HttpHeaders),n=e._HttpMethod(),s=e._Url(),a=e._QueryArg()+"="+e._Pre();n.match(/^GET$/i)&&(s+="?"+a),e.Request=new XMLHttpRequest,e.Request.open(n,s,!0);for(var u=r.length-1;u>=0;u--)e.Request.setRequestHeader(r[u],e.HttpHeaders[r[u]]);e.Request.onreadystatechange=i,e.Request.send(a)}},t.prototype.destroy=function(t){for(var e in t.$Listeners)t.Input.removeEventListener(e,t.$Listeners[e]);t.DOMResults.parentNode.removeChild(t.DOMResults)},t.merge=function(){for(var t,e={},i=0;i<arguments.length;i++)for(t in arguments[i])e[t]=arguments[i][t];return e},t.defaults={Delay:150,EmptyMessage:"No result here",Highlight:{getRegex:function(t){return new RegExp(t,"ig")},transform:function(t){return"<strong>"+t+"</strong>"}},HttpHeaders:{"Content-type":"application/x-www-form-urlencoded"},Limit:0,HttpMethod:"GET",QueryArg:"q",Url:null,KeyboardMappings:{Enter:{Conditions:[{Is:13,Not:!1}],Callback:function(){if(this.DOMResults.getAttribute("class").indexOf("open")!=-1){var t=this.DOMResults.querySelector("li.active");null!==t&&(this._Select(t),this.DOMResults.setAttribute("class","autocomplete"))}},Operator:ConditionOperator.AND},KeyUpAndDown:{Conditions:[{Is:38,Not:!1},{Is:40,Not:!1}],Callback:function(t){t.preventDefault();var e=this.DOMResults.querySelector("li:first-child:not(.locked)"),i=this.DOMResults.querySelector("li:last-child:not(.locked)"),o=this.DOMResults.querySelector("li.active");if(o){var r=Array.prototype.indexOf.call(o.parentNode.children,o),n=r+(t.keyCode-39),s=this.DOMResults.getElementsByTagName("li").length;n<0?n=s-1:n>=s&&(n=0),o.setAttribute("class",""),o.parentElement.childNodes.item(n).setAttribute("class","active")}else i&&38==t.keyCode?i.setAttribute("class","active"):e&&e.setAttribute("class","active")},Operator:ConditionOperator.OR},AlphaNum:{Conditions:[{Is:13,Not:!0},{From:35,To:40,Not:!0}],Callback:function(){var e=this.Input.getAttribute("data-autocomplete-old-value"),i=this._Pre();""!==i&&(e&&i==e||this.DOMResults.setAttribute("class","autocomplete open"),t.prototype.ajax(this,function(){4==this.Request.readyState&&200==this.Request.status&&(this._Render(this._Post(this.Request.response)),this._Open())}.bind(this)))},Operator:ConditionOperator.AND}},DOMResults:null,Request:null,Input:null,_EmptyMessage:function(){var t="";return t=this.Input.hasAttribute("data-autocomplete-empty-message")?this.Input.getAttribute("data-autocomplete-empty-message"):this.EmptyMessage!==!1?this.EmptyMessage:""},_Limit:function(){var t=this.Input.getAttribute("data-autocomplete-limit");return isNaN(t)?this.Limit:parseInt(t)},_Highlight:function(t){return t.replace(this.Highlight.getRegex(this._Pre()),this.Highlight.transform)},_HttpMethod:function(){return this.Input.hasAttribute("data-autocomplete-method")?this.Input.getAttribute("data-autocomplete-method"):this.HttpMethod},_QueryArg:function(){return this.Input.hasAttribute("data-autocomplete-param-name")?this.Input.getAttribute("data-autocomplete-param-name"):this.QueryArg},_Url:function(){return this.Input.hasAttribute("data-autocomplete")?this.Input.getAttribute("data-autocomplete"):this.Url},_Blur:function(t){if(void 0===t&&(t=!1),t)this.DOMResults.setAttribute("class","autocomplete");else{var e=this;setTimeout(function(){e._Blur(!0)},150)}},_Focus:function(){var t=this.Input.getAttribute("data-autocomplete-old-value");t&&this.Input.value==t||this.DOMResults.setAttribute("class","autocomplete open")},_Open:function(){var t=this;Array.prototype.forEach.call(this.DOMResults.getElementsByTagName("li"),function(e){"locked"!=e.getAttribute("class")&&(e.onclick=function(){t._Select(e)})})},_Position:function(){this.DOMResults.setAttribute("class","autocomplete"),this.DOMResults.setAttribute("style","top:"+(this.Input.offsetTop+this.Input.offsetHeight)+"px;left:"+this.Input.offsetLeft+"px;width:"+this.Input.clientWidth+"px;")},_Render:function(t){var e;e="string"==typeof t?this._RenderRaw(t):this._RenderResponseItems(t),this.DOMResults.hasChildNodes()&&this.DOMResults.removeChild(this.DOMResults.childNodes[0]),this.DOMResults.appendChild(e)},_RenderResponseItems:function(t){var e=document.createElement("ul"),i=document.createElement("li");this._Limit()<0&&(t=t.reverse());for(var o=0;o<t.length;o++)i.innerHTML=t[o].Label,i.setAttribute("data-autocomplete-value",t[o].Value),e.appendChild(i),i=document.createElement("li");return e},_RenderRaw:function(t){var e=document.createElement("ul"),i=document.createElement("li");if(t.length>0)this.DOMResults.innerHTML=t;else{var o=this._EmptyMessage();""!==o&&(i.innerHTML=o,i.setAttribute("class","locked"),e.appendChild(i))}return e},_Post:function(t){try{var e=[],i=JSON.parse(t);if(0===Object.keys(i).length)return"";if(Array.isArray(i))for(var o=0;o<Object.keys(i).length;o++)e[e.length]={Value:i[o],Label:this._Highlight(i[o])};else for(var r in i)e.push({Value:r,Label:this._Highlight(i[r])});return e}catch(e){return t}},_Pre:function(){return this.Input.value},_Select:function(t){t.hasAttribute("data-autocomplete-value")?this.Input.value=t.getAttribute("data-autocomplete-value"):this.Input.value=t.innerHTML,this.Input.setAttribute("data-autocomplete-old-value",this.Input.value)},$AjaxTimer:null,$Listeners:{}},t}();module.exports=AutoComplete;
},{}]},{},[1])(1)
});